{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nimport { Component } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nexport let GroupFormComponent = class GroupFormComponent {\n  constructor(fb, emailService) {\n    this.fb = fb;\n    this.emailService = emailService;\n    this.form = this.fb.group({\n      name: ['', Validators.required],\n      members: this.fb.array([])\n    });\n  }\n  ngOnInit() {\n    this.addMember();\n  }\n  get members() {\n    return this.form.get('members');\n  }\n  addMember() {\n    this.members.push(this.fb.group({\n      name: ['', Validators.required],\n      description: [''],\n      city: [''],\n      age: ['']\n    }));\n  }\n  removeMember(index) {\n    if (this.members.length > 1) this.members.removeAt(index);\n  }\n  submit() {\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    const raw = this.form.value;\n    const payload = {\n      name: raw.name,\n      members: (raw.members || []).map(m => ({\n        name: m.name,\n        description: m.description || '',\n        city: m.city || undefined,\n        age: m.age === '' || m.age == null ? undefined : Number(m.age)\n      }))\n    };\n    this.emailService.sendGroup(payload).subscribe({\n      next: () => alert('Grupo enviado correctamente.'),\n      error: err => alert('Error al enviar: ' + (err?.message || err))\n    });\n  }\n};\nGroupFormComponent = __decorate([Component({\n  selector: 'app-group-form',\n  templateUrl: './group-form.component.html'\n}), __metadata(\"design:paramtypes\", [FormBuilder, typeof (_a = typeof EmailService !== \"undefined\" && EmailService) === \"function\" ? _a : Object])], GroupFormComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}