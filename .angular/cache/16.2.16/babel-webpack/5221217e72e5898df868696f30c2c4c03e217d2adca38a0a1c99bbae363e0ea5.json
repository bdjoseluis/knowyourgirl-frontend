{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n    r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n    d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar _a;\nimport { Component } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { GrupoService } from '../services/grupo.service'; // Renombrado\nexport let GroupFormComponent = class GroupFormComponent {\n  constructor(fb, grupoService) {\n    this.fb = fb;\n    this.grupoService = grupoService;\n    // Definimos el formulario con los nombres internos que prefieras\n    this.form = this.fb.group({\n      name: ['', Validators.required],\n      members: this.fb.array([])\n    });\n  }\n  ngOnInit() {\n    this.addMember();\n  }\n  get members() {\n    return this.form.get('members');\n  }\n  addMember() {\n    this.members.push(this.fb.group({\n      name: ['', Validators.required],\n      description: [''],\n      city: [''],\n      age: ['']\n    }));\n  }\n  removeMember(index) {\n    if (this.members.length > 1) this.members.removeAt(index);\n  }\n  submit() {\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    const raw = this.form.value;\n    /**\n     * IMPORTANTE: Aquí mapeamos los datos para que coincidan\n     * exactamente con tus entidades de Spring Boot (Grupo y Persona)\n     */\n    const payload = {\n      nombre: raw.name,\n      personas: (raw.members || []).map(m => ({\n        nombre: m.name,\n        descripcion: m.description || '',\n        ciudad: m.city || '',\n        edad: m.age ? Number(m.age) : 0 // En Java: 'edad'\n      }))\n    };\n    // Llamamos al nuevo servicio que apunta al puerto 8087\n    this.grupoService.saveGroup(payload).subscribe({\n      next: response => {\n        console.log('Respuesta del servidor:', response);\n        alert('¡Grupo y miembros guardados con éxito en la base de datos!');\n        this.resetForm();\n      },\n      error: err => {\n        console.error(err);\n        alert('Error al conectar con Spring Boot: ' + (err.error?.message || err.message));\n      }\n    });\n  }\n  resetForm() {\n    this.form.reset();\n    this.members.clear();\n    this.addMember();\n  }\n};\nGroupFormComponent = __decorate([Component({\n  selector: 'app-group-form',\n  templateUrl: './group-form.component.html'\n}), __metadata(\"design:paramtypes\", [FormBuilder, typeof (_a = typeof GrupoService !== \"undefined\" && GrupoService) === \"function\" ? _a : Object])], GroupFormComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}